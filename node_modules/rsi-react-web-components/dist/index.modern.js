import e,{useState as t,useEffect as n,createContext as r,useContext as i}from"react";import{Box as a,Button as o,CircularProgress as l,Card as c,CardContent as u,CardActions as m,Container as d,TextField as s,FormGroup as f,Link as p}from"@material-ui/core";import{makeStyles as v}from"@material-ui/core/styles";import h from"@material-ui/core/AppBar";import g from"@material-ui/core/Avatar";import b from"@material-ui/core/CardContent";import E from"@material-ui/core/Typography";import y from"@material-ui/core/FormControlLabel";import x from"@material-ui/core/Checkbox";import C from"lodash/object";import S from"immer";import w from"@material-ui/core/InputLabel";import k from"@material-ui/core/MenuItem";import W from"@material-ui/core/FormControl";import P from"@material-ui/core/FormHelperText";import I from"@material-ui/core/Select";import O from"@material-ui/core/CircularProgress";import{MuiPickersUtilsProvider as T,KeyboardDatePicker as z}from"@material-ui/pickers";import N from"@date-io/date-fns";import D from"dayjs";import R from"lodash/padStart";import A from"react-number-format";import F from"@material-ui/core/IconButton";import B from"@material-ui/icons/Delete";import j from"@material-ui/icons/CloudDownload";export{default as CloudDownloadIcon}from"@material-ui/icons/CloudDownload";import M from"@material-ui/icons/Edit";export{default as EditIcon}from"@material-ui/icons/Edit";import q from"@material-ui/core/LinearProgress";import V from"@material-ui/icons/Pageview";export{default as PageviewIcon}from"@material-ui/icons/Pageview";import _ from"@material-ui/core/InputAdornment";import L from"@material-ui/core/TextField";import U from"@material-ui/icons/Search";export{default as SearchIcon}from"@material-ui/icons/Search";import G from"@material-ui/core/Dialog";import Y from"@material-ui/core/DialogContent";import K from"@material-ui/core/DialogTitle";import J from"@material-ui/core/Input";import Q from"react-text-mask";import H from"@material-ui/core/DialogContentText";import X from"@material-ui/core/DialogActions";import Z from"@material-ui/icons/PlayCircleFilledWhite";import $ from"@material-ui/icons/ViewModule";import ee from"@material-ui/core/Radio";import te from"@material-ui/core/RadioGroup";import ne from"react-modal";import re from"@material-ui/core/Stepper";import ie from"@material-ui/core/Step";import ae from"@material-ui/core/StepLabel";import oe from"@material-ui/core/StepButton";import le from"@material-ui/icons/Stop";import ce from"@material-ui/core/Switch";import ue from"@material-ui/core/Table";import me from"@material-ui/core/TableBody";import de from"@material-ui/core/TableCell";import se from"@material-ui/core/TableContainer";import fe from"@material-ui/core/TableHead";import pe from"@material-ui/core/TableRow";import ve from"@material-ui/core/Paper";import he from"@material-ui/core/TablePagination";import ge from"@material-ui/core/Button";import be from"axios";import Ee from"socket.io-client";import{useImmerReducer as ye}from"use-immer";export{default as AccountBoxIcon}from"@material-ui/icons/AccountBox";export{default as CheckIcon}from"@material-ui/icons/Check";export{default as ErrorOutlineIcon}from"@material-ui/icons/ErrorOutline";export{default as BackupIcon}from"@material-ui/icons/Backup";function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}var Se=v(function(e){return{container:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-end",marginTop:50,borderTop:"solid 1px lightgrey"},center:{flexDirection:"column"}}}),we=function(t){var n=t.children,r=t.disabled,i=void 0!==r&&r,o=t.center,l=void 0!==o&&o,c=t.visibleWhen,u=void 0===c||c,m=Ce(t,["children","disabled","center","visibleWhen"]);if(!u)return null;var d=Se(),s=""+d.container;return void 0!==l&&1==l&&(s=s+" "+d.center),e.createElement(a,xe({pt:2},m,{className:s,disabled:!0}),i?e.Children.map(n,function(t){return e.cloneElement(t,{disabled:!0})}):n)},ke=v(function(e){return{root:{backgroundColor:"#2c3e50"},container:{padding:"4px 50px"},menuButton:{marginRight:e.spacing(2)},toolBar:{paddingLeft:"50px"}}}),We=function(t){var n=ke();return e.createElement(h,{variant:"outlined",position:"static",className:n.root,style:xe({},t.style)},t.children)},Pe=function(t){var n=t.src,r=Ce(t,["src"]);return e.createElement(g,xe({src:n},r))},Ie=v(function(e){return{button:{textTransform:"none"}}}),Oe=function(t){var n=t.label,r=t.caption,i=t.action,a=t.loading,c=t.children,u=t.visibleWhen,m=void 0===u||u,d=t.disableWhen,s=void 0!==d&&d,f=Ce(t,["label","caption","action","loading","children","visibleWhen","disableWhen"]);if(!m)return null;var p=Ie();return e.createElement(o,xe({size:"small",variant:"contained",color:"primary",onClick:i,style:{margin:2},disabled:s,endIcon:a&&e.createElement(l,xe({size:18,color:"secondary"},f)),className:p.button},f),n||r||c)},Te=function(t){var n=t.label,r=t.caption,i=t.children,a=Ce(t,["label","caption","children"]);return e.createElement(Oe,xe({size:"medium"},a,{variant:"text"}),n||r||i||"Back")},ze=v(function(e){return{button:{textTransform:"none"}}}),Ne=function(t){var n=t.caption,r=t.href,i=t.children,a=t.visibleWhen,l=void 0===a||a,c=t.disableWhen,u=void 0!==c&&c,m=t.target,d=void 0===m?"_blank":m,s=t.Icon,f=Ce(t,["caption","href","children","visibleWhen","disableWhen","target","Icon"]);if(!l)return null;var p=ze();return e.createElement(o,xe({size:"small",variant:"outlined",color:"primary",href:r,style:{margin:2},disabled:u,className:p.button,endIcon:s&&e.createElement(s,null),target:d},f),n||i)},De=v({root:{marginTop:10,paddingLeft:20,paddingRight:20},title:{padding:10}}),Re=function(t){var n=t.caption,r=t.children,i=De();return e.createElement(c,{className:i.root},n&&e.createElement(E,{variant:"h6",component:"h3",className:i.title},n),e.createElement(b,null,r))},Ae=function(t){return e.createElement(u,{style:{alignItems:"center"}},t.children)},Fe=function(t){return e.createElement(m,null,t.children)},Be=e.createContext(),je=function(e,t,n,r){return n&&"function"==typeof n?n(e):n&&"string"==typeof n?C.get(e,""+n)||r:C.get(e,t)||r},Me=function(e,t){var n=t.id||t.name,r=t.expr;if(e){var i=t.onChange||e.handleChange;return{value:je(e.context,n,r,""),onChange:i}}var a=t.context,o=t.onChange;return{value:a?je(a,n,r):t.value||"",onChange:function(e,t){void 0===t&&(t=!1),o(t?e.target.checked:e.target.value)}}},qe=function(){return e.useContext(Be)},Ve=function(t){var n=t.editable,r=void 0===n||n,i=t.readOnly,a=void 0!==i&&i,o=t.text,l=t.caption,c=Ce(t,["visibleWhen","editable","readOnly","text","caption"]),u=qe(),m=Me(u,c),d=!1;return!a&&r||(d=!0),e.createElement(y,{control:e.createElement(x,xe({checked:"string"!=typeof m.value&&m.value,disabled:d},c,m,{onChange:function(e){m.onChange(e,!0)}})),label:o||l})},_e=v(function(e){return{formControl:{marginTop:3}}}),Le=function(t){var n=t.editable,r=void 0===n||n,i=t.required,a=void 0!==i&&i,o=t.items,l=t.caption,c=t.expr,u=Ce(t,["editable","required","items","caption","expr"]),m=qe(),d=Me(m,u),s=_e();return e.createElement(W,{className:s.formControl,fullWidth:!0,disabled:!r},e.createElement(w,{required:a,id:"select-id"},l),e.createElement(I,xe({labelId:"select-id",id:"select-id",required:a},u,d),o.map(function(t){var n="function"==typeof c?c(t):t.toString();return e.createElement(k,{key:n,value:t},n)})),e.createElement(P,{style:{color:"red"}},u.helperText))},Ue=function(t){var n=t.visibleWhen,r=void 0===n||n,i=Ce(t,["visibleWhen"]);return r?e.createElement(O,i):null},Ge={root:{padding:0},center:{display:"flex",flexDirection:"column",alignItems:"center"}},Ye=function(t){var n,r,i=t.children,a=t.center,o=void 0!==a&&a,l=t.width,c=Ce(t,["children","center","width"]);return e.createElement(d,xe({},c,{style:(n={center:o,width:l},r={},n.width&&(r.width=n.width),xe({},Ge.root,n.center?Ge.center:{},r,n.style))}),i)},Ke=function(e){return null==e||e},Je=function(e){return null==e||e},Qe=function(e){return!Ke(e)},He=function(e){return null!=e&&e};function Xe(e){return void 0===e&&(e=0),e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function Ze(e,t){return void 0===t&&(t=0),e?("string"==typeof e?Number(e):e).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):t}var $e=function(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})},et=function(e,t){return new URLSearchParams(e.search).get(t)},tt=function(e,t,n){if(void 0===n&&(n="d"),!e)return"";var r=D(e||new Date);return D(t||new Date).diff(r,n)},nt=function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n},rt=function(){return(new Date).getFullYear()},it=function(e,t,n){return void 0===n&&(n="0"),R(e,t,n)},at=function(e,t){return void 0===t&&(t="d"),D().add(e,t),D.toISOString()},ot=function(e,t){return void 0===t&&(t="MMMM D, YYYY"),D(e).format(t)},lt=function(e,t){return D(e).isBefore(t)},ct=function(e,t){return t?D(e).isAfter(t):D(D(e)).isAfter()},ut=function(e){return void 0===e&&(e=6),Math.floor(Math.random()*e)+1},mt=function(e){return Object.keys(e).length>0},dt=function(e){void 0===e&&(e=10);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t},st=function(r){var i=r.visibleWhen,a=void 0===i||i,o=r.caption,l=r.label,c=r.editable,u=void 0===c||c,m=r.readOnly,d=void 0!==m&&m,s=r.disabled,f=void 0!==s&&s,p=r.autoOk,v=void 0===p||p,h=r.helperText,g=void 0===h?"mm/dd/yyy":h,b=r.variant,E=void 0===b?"standard":b,y=r.size,x=void 0===y?"small":y,C=Ce(r,["visibleWhen","caption","label","editable","readOnly","disabled","autoOk","helperText","variant","size"]);if(!a)return null;var S=qe(),w=Me(S,C),k=w.value,W=w.onChange,P=Ce(w,["value","onChange"]),I=t(null),O=I[0],D=I[1];return n(function(){var e;!O&&null!==k&&k.toString().length>0&&(e=k.indexOf(" ")>0?new Date(k.split(" ")[0]+"T00:00:00+08:00"):new Date(k+"T00:00:00+08:00"),D(e))},[k]),e.createElement(T,{utils:N},e.createElement(z,xe({disableToolbar:!0,format:"MM/dd/yyyy",variant:"inline",margin:"normal",inputVariant:E,size:x,label:o||l,helperText:g,fullWidth:!0,autoOk:v},C,P,{value:O,onChange:function(e){D(e);var t=null;if(e&&!/invalid/i.test(e.toString())){var n=e.toLocaleDateString().split("/");n[0]=it(n[0],2),n[1]=it(n[1],2),t=n[2]+"-"+n[0]+"-"+n[1]}W({target:{name:C.name,value:t}})},disabled:!u||d||f})))};function ft(t){var n=t.inputRef,r=t.onChange,i=Ce(t,["inputRef","onChange"]);return e.createElement(A,xe({},i,{getInputRef:n,onValueChange:function(e){r({target:{name:t.name,value:e.value}})},thousandSeparator:!0,isNumericString:!0,decimalScale:2,fixedDecimalScale:!0,readOnly:!t.editable||t.readOnly},i))}var pt=function(t){var n=t.label,r=t.caption,i=t.editable,a=void 0===i||i,o=t.readOnly,l=void 0!==o&&o,c=t.textAlign,u=void 0===c?"right":c,m=Ce(t,["label","caption","editable","readOnly","textAlign"]),d=qe(),f=Me(d,m);return e.createElement(s,xe({label:n||r,autoComplete:"off",readOnly:!a||l},m,f,{InputProps:{inputComponent:ft},inputProps:{style:{textAlign:u}}}))},vt=function(t){var n=t.action,r=t.visibleWhen,i=void 0===r||r,a=t.disableWhen,o=void 0!==a&&a,l=t.iconSize,c=void 0===l?"small":l,u=Ce(t,["action","visibleWhen","disableWhen","iconSize"]);return i?e.createElement(F,xe({onClick:n,color:"secondary","aria-label":"delete",disabled:o},u),e.createElement(B,{fontSize:c})):null},ht=function(t){var n=t.caption,r=t.visibleWhen,i=t.Icon;return void 0===r||r?e.createElement(Ne,{caption:void 0===n?"Download":n,href:t.href,Icon:void 0===i?j:i}):null},gt=function(t){var n=t.action,r=t.visibleWhen,i=void 0===r||r,a=t.disableWhen,o=void 0!==a&&a,l=t.iconSize,c=void 0===l?"small":l,u=Ce(t,["action","visibleWhen","disableWhen","iconSize"]);return i?e.createElement(F,xe({onClick:n,color:"primary","aria-label":"edit",disabled:o},u),e.createElement(M,{fontSize:c})):null},bt=function(t){var n=t.label,r=t.caption,i=Ce(t,["label","caption"]),a=qe(),o=Me(a,i);return e.createElement(s,xe({label:n||r||"Email Address",fullWidth:!0,autoComplete:"off"},i,o,{type:"email",onChange:function(e){var t=e.target;o.onChange({target:{name:t.name,value:t.value.toLowerCase()}})}}))},Et=function(t){var n=t.caption,r=t.context,i=t.expr,a=t.exprValue,o=t.children,l=t.blur,c=void 0!==l&&l,u=Ce(t,["caption","context","expr","exprValue","children","blur"]),m=a||o,d=qe();return r&&i?m="function"==typeof i?i(r):C.get(r,i):d&&(m=Me(d,xe({},u,{name:i})).value),e.createElement("div",{style:xe({},yt.wrapper,u.style,c?yt.blur:{})},n&&e.createElement("label",{style:xe({},yt.caption,u.captionStyle)},n),e.createElement("label",{style:xe({},yt.label,u.labelStyle)},m?m.toString():o))},yt={wrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingTop:5,paddingBottom:5},caption:{fontWeight:"800",fontSize:14,width:200},label:{fontSize:"14px"},blur:{filter:"blur(3px)","-webkit":"blur(3px)"}},xt=function(t){var n=t.msg;return n?e.createElement(Et,{style:{color:"red"}},n):null},Ct={backgroundColor:"#ecf0f1",borderTop:"3px solid #2c3e50",textAlign:"center",padding:"10px",position:"fixed",left:"0",bottom:"0",width:"100%"},St=function(t){return e.createElement(a,{style:Ct},t.children)},wt=function(t){var n=t.children,r=t.visibleWhen,i=void 0===r||r,a=t.row,o=void 0!==a&&a,l=Ce(t,["children","visibleWhen","row"]);if(!i)return null;var c=function(e){var t=e.width,n=e.center,r=void 0!==n&&n,i=e.row,a=void 0!==i&&i,o={};return t&&(o.width=t),a&&(o.display="flex",o.flexDirection="row",o.alignItems="center"),r&&(o=xe({},o,kt.center)),o}(xe({},l,{row:o}));return e.createElement("div",xe({style:xe({},kt.panel,c,l.style)},l),n)},kt={panel:{display:"flex",flexDirection:"column"},center:{display:"flex",flexDirection:"column",alignItems:"center"}},Wt=function(t){var n=t.children,r=t.visibleWhen,i=void 0===r||r,a=t.handler,o=Ce(t,["children","visibleWhen","handler"]);if(!i)return null;var l=function(e){var t=e.context,n=void 0===t?{}:t,r=e.handler,i=Ce(e,["context","handler"]);return xe({context:n,handleChange:function(e,t){void 0===t&&(t=!1);var i=e.target.name,a="boolean"==typeof t&&t?e.target.checked:e.target.value,o=S(n,function(e){C.set(e,i,a)});r(o)}},i)}(xe({},o,{handler:a}));return e.createElement(Be.Provider,{value:l},e.createElement(wt,o,"function"==typeof n?n(l):n))},Pt=v(function(e){return{root:{flexWrap:"flex"}}}),It=function(t){var n=t.children,r=Ce(t,["children"]),i=Pt();return e.createElement(f,xe({className:i.root},r),n)},Ot=v(function(e){return{root:{flexGrow:1,backgroundColor:"#ecf0f1"},container:{padding:"4px 50px"},menuButton:{marginRight:e.spacing(2)}}});function Tt(t){var n=t.children,r=Ot();return e.createElement(h,{variant:"outlined",position:"static",className:r.root},n)}var zt=function(t){return e.createElement("img",t)};function Nt(t){var n=t.inputRef,r=t.onChange,i=t.thousandSeparator,a=void 0===i||i,o=Ce(t,["inputRef","onChange","thousandSeparator"]);return e.createElement(A,xe({},o,{getInputRef:n,onValueChange:function(e){r({target:{name:t.name,value:e.value}})},thousandSeparator:a,isNumericString:!0,decimalScale:0}))}function Dt(t){var n=t.inputRef,r=t.onChange,i=t.thousandSeparator,a=void 0!==i&&i,o=Ce(t,["inputRef","onChange","thousandSeparator"]);return e.createElement(A,xe({},o,{getInputRef:n,onValueChange:function(e){r({target:{name:t.name,value:e.value}})},thousandSeparator:a,isNumericString:!0,decimalScale:0}))}var Rt=function(t){var n=t.label,r=t.caption,i=t.thousandSeparator,a=void 0===i||i,o=t.size,l=void 0===o?"small":o,c=Ce(t,["label","caption","thousandSeparator","size"]),u=qe(),m=Me(u,c);return e.createElement(s,xe({label:n||r,size:l,autoComplete:"off"},c,m,{InputProps:{inputComponent:a?Nt:Dt}}))},At=function(t){var n=t.value;return e.createElement("div",null,e.createElement("label",null,t.caption),e.createElement("label",null,n))},Ft=function(t){var n=t.visibleWhen,r=void 0===n||n,i=Ce(t,["visibleWhen"]);return r?e.createElement(q,i):null},Bt=function(t){var n=t.caption,r=t.visibleWhen,i=void 0===r||r,a=t.children,o=Ce(t,["caption","exprValue","visibleWhen","children"]);return i?e.createElement(p,xe({variant:"body2"},o),n||a):null},jt=function(t){var n=t.title,r=t.href,i=t.target,a=void 0===i?"_blank":i,o=t.style,l=void 0===o?{}:o,c=t.astyle,u=void 0===c?{}:c,m=t.color,d=void 0===m?"green":m,s=t.width,f=void 0===s?0:s,p=t.Icon,v=void 0===p?V:p;return f>0&&(l.width=f),e.createElement("div",{style:xe({},Mt.row,l)},n&&e.createElement("label",{style:Mt.title},n),e.createElement("a",{href:r,target:a,astyle:xe({},u)},e.createElement(v,{style:{color:d}})))},Mt={row:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",margin:1},title:{marginRight:10,width:"100%"}},qt=function(t){var n=t.items,r=t.children,i=Ce(t,["items","children"]),a=[];return n.forEach(function(n){a.push("function"==typeof r?r(xe({},i,{item:n})):function t(n,r){var i=[];if(r.children){var a=r.children,o=Ce(r,["children"]);e.Children.forEach(a,function(r,a){if("function"==typeof r)i.push(r(xe({},o,{item:n})));else{var l=function(e,t,n){var r=xe({},n);if(t.props){var i=t.props.expr;i&&(r.exprValue=e[i].toString())}return r}(n,r,o),c=t(n,r.props);l.key=dt();var u=e.cloneElement(r,l,c);i.push(u)}})}return i}(n,t))}),e.createElement("div",{style:xe({},t.style)},a)},Vt=function(t){var n=t.visibleWhen,r=void 0===n||n,i=t.showMessage,a=void 0===i||i,o=Ce(t,["visibleWhen","showMessage"]);if(!r)return null;var l=o.msg||"Processing...";return e.createElement("div",{style:_t.container},e.createElement("div",{style:_t.progress},e.createElement(Ue,xe({size:16,color:"secondary"},o))),a&&e.createElement("div",{style:_t.msg},l))},_t={container:{display:"flex",flexDirection:"row",marginTop:5,marginBottom:5},progress:{paddingRight:10},msg:{color:"#f50057"}},Lt=v(function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}}),Ut=function(n){var r=n.caption,i=n.visibleWhen,a=void 0===i||i,o=n.editable,l=void 0===o||o,c=n.readOnly,u=void 0!==c&&c,m=n.children,d=n.onSelect,s=n.query,f=n.setQuery,p=n.searchFieldTitle,v=n.searchField,h=n.hideSearchText,g=void 0!==h&&h,b=n.enableSelect,E=void 0===b||b,y=Ce(n,["caption","visibleWhen","editable","readOnly","containerStyle","children","onSelect","query","setQuery","searchFieldTitle","searchField","hideSearchText","enableSelect"]);if(!a)return null;var x=Lt(),S=t(),w=S[0],k=S[1],W=t(!1),P=W[0],I=W[1],O=function(){if(v){var e=C.set(s,v,w);f(e)}I(!0)};return e.createElement(e.Fragment,null,g?e.createElement(F,{onClick:O},e.createElement(U,null)):e.createElement(L,xe({className:x.margin,label:r,value:w,onChange:function(e){k(e.target.value)},variant:"outlined",size:"small",helperText:p,autoFocus:!0},y,{InputProps:{readOnly:u||!l,endAdornment:e.createElement(_,{position:"end"},e.createElement(F,{onClick:O},e.createElement(U,null)))}})),e.createElement(G,{open:P},e.createElement(K,null,r),e.createElement(Y,null,m,e.createElement(we,null,e.createElement(Oe,{variant:"text",caption:"Cancel",onClick:function(){I(!1)}}),e.createElement(Oe,{caption:"Select",onClick:function(){d()&&I(!1)},disableWhen:!E})))))},Gt=v(function(e){return{formControl:{marginTop:3}}});function Yt(t){var n=t.inputRef,r=Ce(t,["inputRef"]);return e.createElement(Q,xe({ref:function(e){n(e?e.inputElement:null)},guide:!0},r))}var Kt=function(t){var n=t.label,r=t.caption,i=t.mask,a=void 0===i?[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]:i,o=t.len,l=void 0===o?7:o,c=t.placeholderChar,u=void 0===c?" ":c,m=t.showMask,d=void 0!==m&&m,s=t.required,f=void 0!==s&&s,p=t.autoFocus,v=Ce(t,["label","caption","mask","len","placeholderChar","showMask","required","autoFocus"]),h=qe(),g=Me(h,v),b=Gt();return e.createElement(W,{className:b.formControl,fullWidth:!0},e.createElement(w,{required:f,htmlFor:"formatted-text-mask"},n||r),e.createElement(J,xe({id:"formatted-text-mask",required:f,onBlur:function(e){var t=e.target,n=t.name,r=t.value.replace(new RegExp(u,"gi"),"");a.forEach(function(e){"string"==typeof e&&(r=r.replace(new RegExp(e,"gi"),""))});var i=r;r.trim().length>0&&(i=function(e,t,n){for(var r="";t>0;)r+="0",t--;return r+e}(r,l-r.length)),g.onChange({target:{name:n,value:i}})},mask:a},v,g,{inputComponent:Yt,inputProps:{mask:a,showMask:d,placeholderChar:u,autoFocus:p}})))},Jt=function(t){var n=t.children,r=t.onAccept,i=t.onCancel,a=t.showActions,o=void 0===a||a;return e.createElement(G,{open:t.open},e.createElement(K,null,t.caption),e.createElement(Y,null,n,o&&e.createElement(we,null,e.createElement(Oe,{variant:"text",caption:"Cancel",onClick:i}),e.createElement(Oe,{caption:"OK",onClick:r}))))},Qt=v(function(e){return{formControl:{marginTop:3}}});function Ht(t){var n=t.inputRef,r=Ce(t,["inputRef"]);return e.createElement(Q,xe({ref:function(e){n(e?e.inputElement:null)},mask:["(",/\d/,/\d/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholderChar:" "},r))}var Xt=function(t){var n=t.label,r=t.caption,i=t.required,a=void 0!==i&&i,o=Ce(t,["label","caption","required"]),l=qe(),c=Me(l,o),u=Qt();return e.createElement(W,{className:u.formControl,fullWidth:!0},e.createElement(w,{required:a,htmlFor:"formatted-text-mask-input"},n||r||"Mobile No."),e.createElement(J,xe({required:a},o,c,{id:"formatted-text-mask-input",inputComponent:Ht})))},Zt=function(t){var n=t.open,r=t.type,i=void 0===r?"alert":r,a=t.msg,o=t.acceptCaption,l=void 0===o?"OK":o,c=t.onAccept,u=t.onCancel,m=t.children,d=Ce(t,["open","type","msg","acceptCaption","onAccept","onCancel","children"]).title||("alert"===i?"Information":"Confirmation");return e.createElement(G,{open:n},d&&e.createElement(K,null,d),e.createElement(Y,null,e.createElement(H,null,a),m),e.createElement(X,null,"alert"!==i&&e.createElement(Oe,{variant:"text",caption:"Cancel",onClick:u}),e.createElement(Oe,{caption:l,onClick:c})))},$t=function(t){var n,r=(n={header:null,left:null,center:null,right:null,footer:null},e.Children.forEach(t.children,function(e){if(e){var t=e.props.target||"center";n[t]||(n[t]=[]),n[t].push(e)}}),n),i=r.center,a=r.right;return e.createElement("div",{className:"_12CqV"},e.createElement("div",{className:"_3rBoA"},e.createElement("div",{className:"_1Pt6o"},e.createElement("aside",{className:"_3GVFn _1JqCZ"},e.createElement("div",{style:{position:"fixed"}},r.left)),e.createElement("div",{className:"_3FaYg"},i),e.createElement("aside",{className:"_3GVFn _2yu7F"},a))))},en=function(t){var n=qe(),r=Me(n,t);return e.createElement(s,xe({label:t.label||t.caption||"Password",fullWidth:!0},t,r,{type:"password"}))},tn=function(t){var n=t.action,r=t.visibleWhen,i=void 0===r||r,a=t.disableWhen,o=void 0!==a&&a,l=t.iconSize,c=void 0===l?"small":l,u=t.color,m=void 0===u?"green":u,d=Ce(t,["action","visibleWhen","disableWhen","iconSize","color"]);return i?e.createElement(F,xe({onClick:n,"aria-label":"play button",disabled:o},d),e.createElement(Z,{fontSize:c,htmlColor:m})):null},nn=function(t){var n=t.action,r=t.visibleWhen,i=void 0===r||r,a=t.disableWhen,o=void 0!==a&&a,l=Ce(t,["action","visibleWhen","disableWhen"]);return i?e.createElement(F,xe({onClick:n,color:"primary","aria-label":"edit",disabled:o},l),e.createElement($,null)):null},rn=function(t){var n=t.caption,r=void 0===n?"Preview":n,i=t.href,a=t.visibleWhen,o=t.Icon,l=t.target,c=void 0===l?"_blank":l;return void 0===a||a?r?e.createElement(Ne,{caption:r,href:i,Icon:void 0===o?V:o}):e.createElement(F,{size:"small",href:i,color:"primary","aria-label":"Preview Report",target:c},e.createElement(V,null)):null},an=function(t){var n=t.label,r=t.caption,i=t.loading,a=void 0!==i&&i,c=t.visibleWhen,u=void 0!==c&&c,m=t.children,d=Ce(t,["label","caption","loading","visibleWhen","children"]);return u?e.createElement(o,xe({size:"small",variant:"contained",color:"primary"},d),n||r||m,"  ",a&&e.createElement(l,xe({size:18,color:"secondary"},d))):null};function on(t){var n=t.inputRef,r=Ce(t,["inputRef"]);return e.createElement(Q,xe({ref:function(e){n(e?e.inputElement:null)},mask:["(",/\d/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholderChar:" "},r))}var ln=function(t){var n=t.label,r=t.caption,i=Ce(t,["label","caption"]),a=qe(),o=Me(a,i);return e.createElement(W,null,e.createElement(w,{htmlFor:"formatted-text-mask-input"},n||r||"Phone No."),e.createElement(J,xe({},i,o,{id:"formatted-text-mask-input",inputComponent:on})))},cn=function(t){var n=t.item,r=t.Control;return e.createElement("div",{style:mn.customItemContainer},e.createElement(ee,{value:n.objid}),e.createElement(r,{item:n}))},un=function(t){var n,r=t.children,i=t.readOnly,a=void 0!==i&&i,o=t.editable,l=void 0===o||o,c=t.list,u=t.Control,m=Ce(t,["children","caption","readOnly","editable","list","Control"]),d=qe(),s=Me(d,m),f=a||!l;return n=c?c.map(function(t){return u?e.createElement(cn,{item:t,Control:u}):e.createElement(y,{value:t.objid,control:e.createElement(ee,null),label:t.caption||t.title,disabled:f})}):e.Children.map(r,function(t){var n=t.props,r=n.readOnly,i=void 0!==r&&r,a=n.editable,o=void 0===a||a,l=Ce(n,["readOnly","editable"]);return e.createElement(y,xe({value:t.props.value,control:e.createElement(ee,null),label:t.props.caption,disabled:f||i||!o},l))}),e.createElement(W,{component:"fieldset"},e.createElement(te,xe({},m,{value:s.value,onChange:function(e,t){s.onChange({target:{name:m.name,value:t}})},style:{display:"flex"}}),n))},mn={customItemContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",border:"1px solid #aaa"}};ne.setAppElement("#root");var dn=function(n){var r=n.title,i=n.items,a=n.open,o=n.style,l=n.onClose,c=n.afterOpen,u=void 0===c?function(){}:c,m=t(),d=m[0],s=m[1];return e.createElement(ne,{isOpen:a,onAfterOpen:u,style:o},e.createElement("div",{style:sn.container},e.createElement("h2",null,r),e.createElement(Oe,{caption:"Close",action:l}),e.createElement("div",{style:sn.viewerContainer},e.createElement("div",{style:sn.itemContainer},i.map(function(t,n){return e.createElement("div",{style:sn.item,key:n,onClick:function(){return function(e){s(e)}(t.href)}},e.createElement(t.Icon,{style:{color:"green",fontSize:32}}),e.createElement("label",{style:sn.itemTitle},t.title))})),e.createElement("div",{style:sn.viewer},d&&e.createElement("iframe",{type:"text/html",src:d,style:sn.frame})))))},sn={container:{display:"flex",flexDirection:"column",flex:1,backgroundColor:"yellow"},viewerContainer:{display:"flex",flexDirection:"row",flex:1,height:"100%",border:"1px solid #aaa"},itemContainer:{display:"flex",flexDirection:"column",alignItems:"center",padding:5,border:"1px solid #aaa",width:100},item:{display:"flex",flexDirection:"column",alignItems:"center",padding:5,margin:5,width:"90%",cursor:"pointer"},itemTitle:{fontSize:10},viewer:{display:"flex",flex:1},frame:{width:"100%",height:"100%"}},fn=function(t){return e.createElement("div",{style:{height:t.height||20}},t.children)},pn=v(function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)}}}),vn=function(t){var n=qe(),r=Me(n,t),i=t.caption,a=t.items,o=t.name,l=t.expr,c=Ce(t,["caption","items","name","expr"]),u=pn(),m=function(t,n){return t.map(function(t){var r;return"function"==typeof n&&(r=n(t)),"string"==typeof n&&"object"==typeof t&&(r=C.get(t,n)),e.createElement(k,{key:dt(),value:t},r||t)})}(a,l);return l&&(r.renderValue=function(e){return e[l]}),e.createElement(W,{className:u.formControl},e.createElement(w,null,i),e.createElement(I,xe({},c,r,{name:o}),m))},hn=function(t){var n=t.caption,r=t.title,i=t.children;return e.createElement(Et,{labelStyle:xe({},gn.title,t.style)},n||r||i)},gn={title:{paddingTop:"10px",color:"#27ae60",fontSize:20,fontWeight:"bold"}},bn=function(t){return e.createElement(Et,{labelStyle:En.title},t.caption||t.title||t.children)},En={title:{fontSize:18,fontWeight:"bold",opacity:.85}},yn=v(function(e){return{root:{width:"100%",backgroundColor:"transparent"},selectedStep:{color:"#27ae60 !important"}}}),xn=function(t){var n=t.orientation,r=t.completedStep,i=t.handleStep,a=t.steps,o=t.activeStep,l=yn(),c=r>0?r-1:o;return e.createElement(re,{className:l.root,activeStep:c,orientation:n||"vertical"},a.map(function(t,n){if(t.caption){var a={},u={};n===o&&(u.completed=l.selectedStep);var m=e.createElement(ae,a,t.caption);return i&&n<=r&&(m=e.createElement(oe,{onClick:function(){return i(n)},completed:n<=c},e.createElement(ae,xe({classes:u,StepIconProps:{classes:u}},a),t.caption))),e.createElement(ie,xe({key:t.caption},{}),m)}}))},Cn=function(t){var n=t.action,r=t.visibleWhen,i=void 0===r||r,a=t.disableWhen,o=void 0!==a&&a,l=t.iconSize,c=void 0===l?"small":l,u=t.color,m=void 0===u?"red":u,d=Ce(t,["action","visibleWhen","disableWhen","iconSize","color"]);return i?e.createElement(F,xe({onClick:n,"aria-label":"play button",disabled:o},d),e.createElement(le,{fontSize:c,htmlColor:m})):null},Sn=function(t){var n=t.caption,r=t.onChange,i=Ce(t,["caption","onChange"]);return e.createElement(y,{control:e.createElement(ce,xe({color:"primary"},i,{onChange:function(e){r(e.target.checked)}})),label:n})},wn={currency:Ze,number:Xe},kn=v(function(e){return{head:{fontWeight:"bold",opacity:.8},paper:{width:"100%",marginBottom:e.spacing(2)},pagination:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}}),Wn=function(r){var i=r.items,a=void 0===i?[]:i,o=r.showPagination,l=void 0===o||o,c=r.rowsPerPage,u=void 0===c?5:c,m=r.fetchList,d=r.singleSelect,s=void 0!==d&&d,f=r.multiSelect,p=void 0!==f&&f,v=r.keyId,h=r.onSelectItems,g=Ce(r,["items","showPagination","rowsPerPage","fetchList","singleSelect","multiSelect","keyId","onSelectItems"]),b=t(0),E=b[0],y=b[1],w=t(u),k=w[0],W=w[1],P=t([]),I=P[0],O=P[1];n(function(){m&&m({start:E,limit:k})},[E,k]),n(function(){h&&h(I)},[I]);var T=kn(),z=a.length===k?-1:E*k+a.length,N=p||s?{numSelected:I.length,rowCount:-1===z?k:a.length,multiSelect:p,singleSelect:s,onSelectAllClick:function(){O(0===I.length?a:[])},onSelectItem:function(e,t){var n=I.findIndex(function(e){return e[v]===t[v]});O(n>=0?S(function(e){return e.filter(function(e){return e[v]!==t[v]})}):p?I.concat(t):[t])}}:{},D=function(t,n){var r=kn(),i=e.Children.map(t.children,function(t){var n=t.props,i=n.caption,a=Ce(n,["caption","expr"]);return e.createElement(de,xe({key:dt(),className:r.head},a),i)});if(n.singleSelect)i.unshift(e.createElement(de,{key:dt(),padding:"checkbox"},e.createElement("span",null," ")));else if(n.multiSelect){var a=n.numSelected,o=n.rowCount,l=n.onSelectAllClick;i.unshift(e.createElement(de,{key:dt(),padding:"checkbox"},e.createElement(x,{indeterminate:a>0&&a<o,checked:o>0&&a===o,onChange:l})))}return i}(r,N),R=function(t,n,r){var i=t.items,a=t.children,o=[];return(void 0===i?[]:i).forEach(function(i){var l=e.Children.map(a,function(t,n){var r=t.props,a=r.expr,o=r.format,l=r.children,c=Ce(r,["caption","expr","format","children"]),u=function(t){var n,r=t.item,i=t.expr,a=t.children;if(i)if("string"==typeof i){var o=wn[t.format],l=C.get(r,i);n=o?o(l):l}else n=i(r).toString();else n="function"==typeof a?a(r):function t(n,r){return e.Children.map(r,function(r){var i=r.props,a=i.action,o=i.children;if("function"==typeof a)return e.cloneElement(r,{action:function(e){e.stopPropagation(),a(n)}},o);if(o.length>0){var l=t(n,o);return e.cloneElement(r,{},l)}return r})}(r,a);return n}({item:i,expr:a,format:o,children:l}),m=0===n?{component:"th",scope:"row"}:{};return e.createElement(de,xe({key:dt()},m,c),u)});if(r.multiSelect||r.singleSelect){var c=t.keyId,u=n.findIndex(function(e){return e[c]===i[c]})>=0;l.unshift(e.createElement(de,{key:dt(),padding:"checkbox"},e.createElement(x,{checked:u}))),o.push(e.createElement(pe,{hover:!0,onClick:function(e){return r.onSelectItem(e,i)},role:"checkbox",tabIndex:-1,key:dt(),selected:u},l))}else o.push(e.createElement(pe,{key:dt()},l))}),o}(r,I,N);return e.createElement(ve,{className:T.paper},e.createElement(se,null,e.createElement(ue,xe({},g,{size:"small"}),e.createElement(fe,null,e.createElement(pe,null,D)),e.createElement(me,null,R))),l&&e.createElement(he,{rowsPerPageOptions:[5,10,25],component:"div",count:z,rowsPerPage:k,page:E,onChangePage:function(e,t){y(t),O([])},onChangeRowsPerPage:function(e){W(parseInt(e.target.value,10))},labelDisplayedRows:function(e){var t=e.to;return e.from+"-"+t+" of "+(-1!==e.count?t:"?")}}))},Pn=function(t){return e.createElement("div",null,t.children)},In=function(t){var n=t.label,r=t.caption,i=t.visibleWhen,a=void 0===i||i,o=t.editable,l=void 0===o||o,c=t.readOnly,u=void 0!==c&&c,m=t.containerStyle,d=t.textCase,f=void 0===d?"UPPER":d,p=t.blur,v=void 0!==p&&p,h=Ce(t,["label","caption","visibleWhen","editable","readOnly","containerStyle","textCase","blur"]);if(!a)return null;var g=qe(),b=Me(g,h),E={};!u&&l||(E.readOnly=!0);var y=!0===v?On.blur:{};return e.createElement("div",{style:xe({},On.root,m)},e.createElement(s,xe({label:r||n,fullWidth:!0,inputProps:E,autoComplete:"off",helperText:h.error,size:"small"},h,b,{style:xe({},y),onChange:function(e){var t=e.target,n=t.name,r=t.value;/upper/i.test(f)?b.onChange({target:{name:n,value:r.toUpperCase()}}):b.onChange(e)}})))},On={root:{width:"100%",marginBottom:3},blur:{filter:"blur(3px)","-webkit":"blur(3px)"}},Tn=function(t){var n=t.caption,r=t.exprValue,i=t.children,o=Ce(t,["caption","exprValue","children"]);return e.createElement(a,xe({fontSize:"1.7em",fontWeight:"bold"},o),n||r||i)},zn=function(n){var r=n.onUpload,i=n.fileId,a=n.caption,o=void 0===a?"Upload":a,l=n.color,c=void 0===l?"secondary":l,u=n.visibleWhen,m=n.multiple,d=void 0!==m&&m,s=n.url,f=void 0===s?"/filipizen/attachment/upload":s;if(void 0!==u&&!u)return null;var p=t(),v=p[0],h=p[1],g=t("")[1],b=t(0),E=b[0],y=b[1],x=t(!1),C=x[1];return e.createElement("div",{className:"_1L-R5"},e.createElement("div",{className:"_CQGbS"},x[0]?e.createElement(Vt,{msg:"Uploading file..."}):e.createElement(e.Fragment,null,e.createElement("input",{className:"_1d5R2",id:i,type:"file",onChange:function(e){y(0);var t=e.target.files[0];g(t),t&&function(e){h(null),C(!0);var t=new FormData;t.append("file",e),t.append("key",i),be.post(f,t,{onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100);y(t)}}).then(function(e){r({name:e.data.name,key:e.data.key,location:e.data.location}),C(!1)}).catch(function(e){h(e),C(!1)})}(t)},multiple:d}),e.createElement("label",{htmlFor:i},e.createElement(ge,{variant:"outlined",component:"span",color:c},o||"Upload"))),0!=E&&100!=E&&e.createElement("div",{className:"_3Gt_X",style:{width:E}},E,"%"),e.createElement(xt,{msg:v})))},Nn=function(t){var n=t.action,r=t.visibleWhen,i=void 0===r||r,a=t.disableWhen,o=void 0!==a&&a,l=Ce(t,["action","visibleWhen","disableWhen"]);return i?e.createElement(F,xe({onClick:n,"aria-label":"view",disabled:o},l),e.createElement(V,{style:xe({color:"green"},l.iconStyle)})):null},Dn=function(e){return e.indexOf(":")>0},Rn={},An={lookup:function(e,t,n,r){var i,a;return void 0===t&&(t="default"),void 0===r&&(r={debug:!1}),null==Rn[e]&&(i=Dn(e)?function(e,t,n){var r=e.indexOf(":"),i=e.substring(0,r);return function(e,t,n,r){var i=Ee("/gdx");return i.connect(),{invoke:function(a,o,l){(function(a,o){try{var l=new Promise(function(l,c){i.emit("invoke",{service:e,method:a,channel:t,connection:n,module:r,args:o},function(e){"OK"===e.status?l(e.data):c(e.msg)}),i.on("disconnect",function(){console.log("AsyncFetch disconnted")})});return Promise.resolve(l)}catch(e){return Promise.reject(e)}})(a,o).then(function(e){return l(null,e)}).catch(function(e){/syntax/i.test(e)?l("Partner is currently not avaible. Please try again later.",null):l(e,null)})}}}(e.substring(r+1),i,t,n)}(e,t,n):function(e,t,n){return{invoke:function(r,i,a){fetch("/filipizen/service/invoke",{method:"POST",cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:{module:n,connection:t,name:e,action:r},args:i?[i]:null})}).then(function(e){return e.json()}).then(function(e){e.error?a(e.error,null):(Array.isArray(e)||0!==Object.keys(e).length||a(null,null),Array.isArray(e)||"ERROR"!==e.status?a(null,e):a(e.msg,null))}).catch(function(e){return a(e.toString(),null)})}}}((a=xe({serviceName:e,connection:t,module:n},r)).serviceName,a.connection,a.module),Rn[e]=i),Rn[e]},lookupAsync:function(e,t,n,r){void 0===t&&(t="default"),void 0===r&&(r={debug:!1});var i,a="Async"+e;return null==Rn[a]&&(i=Dn(e)?function(e,t,n){var r=e.indexOf(":"),i=e.substring(0,r);return function(e,t,n,r){var i=Ee("/gdx");return i.connect(),{invoke:function(a,o,l){try{var c=new Promise(function(c,u){i.emit("invoke",{service:e,method:a,connection:n,module:r,channel:t,args:o},function(e){"OK"===e.status?(l&&l(!1,e.data),c(e.data)):(l&&l(e.msg),u(e.msg))})});return Promise.resolve(c)}catch(e){return Promise.reject(e)}}}}(e.substring(r+1),i,t,n)}(e,t,n):function(e){return t=e.serviceName,n=e.connection,r=e.module,{invoke:function(e,i){try{return Promise.resolve(fetch("/filipizen/service/invoke",{method:"POST",cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:{module:r,connection:n,name:t,action:e},args:i?[i]:null})})).then(function(e){if(200!==e.status)throw e.statusText;return Promise.resolve(e.json())})}catch(e){return Promise.reject(e)}}};var t,n,r}(xe({serviceName:e,connection:t,module:n},r)),Rn[a]=i),Rn[a]}},Fn=function(){var e={"/gdx":[]};return{register:function(t,n,r){void 0===r&&(r="/gdx");var i=Ee(r);return i.on(t,function(e){n(e)}),void 0===e[r]?e[r]=[i]:e[r].push(i),i}}},Bn=r(),jn=r(),Mn=function(t){var n=t.children,r=ye(t.reducer,t.initialState);return e.createElement(Bn.Provider,{value:r[0]},e.createElement(jn.Provider,{value:r[1]},n))},qn=function(){var e=i(Bn);if(void 0===e)throw new Error("useStateValue must be used within a StateProvider");return e},Vn=function(){var e=i(jn);if(void 0===e)throw new Error("useStateDispatch must be used within a StateProvider");return e},_n=function(){return[qn(),Vn()]};export{we as ActionBar,We as AppBar,Pe as Avatar,Te as BackLink,Oe as Button,Ne as ButtonLink,Re as Card,Fe as CardActions,Ae as CardContent,Ve as Checkbox,Ue as CircularProgress,Le as Combobox,Ye as Content,st as Date,pt as Decimal,vt as DeleteButton,ht as DownloadReport,gt as EditButton,bt as Email,xt as Error,St as Footer,Wt as FormPanel,It as Group,Tt as Header,zt as Image,Rt as Integer,At as Item,Et as Label,Ft as LinearProgress,Bt as Link,jt as LinkIcon,qt as List,Vt as Loading,Ut as Lookup,Kt as MaskedInput,Xt as Mobileno,Jt as Modal,Zt as MsgBox,$t as Page,wt as Panel,en as Password,ln as PhoneNo,tn as PlayButton,nn as PreviewButton,rn as PreviewReport,an as ProgressButton,un as Radio,dn as ReportViewer,vn as Select,An as Service,fn as Spacer,Mn as StateProvider,xn as Stepper,Cn as StopButton,hn as Subtitle,bn as Subtitle2,Sn as Switch,Wn as Table,Pn as TableColumn,In as Text,Tn as Title,zn as UploadButton,Nn as ViewButton,Ze as currencyFormat,at as dateAdd,ot as formatDate,Xe as formatNumber,rt as getCurrentYear,tt as getDuration,Fn as getNotification,et as getUrlParameter,$e as groupBy,mt as hasErrors,nt as integerRangeToArray,ct as isDateAfter,lt as isDateBefore,He as isDisabled,Je as isEditable,Qe as isHidden,Ke as isVisible,dt as makeId,it as padLeft,ut as randomInt,_n as useData};
